<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heat Adjusted Pace</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: auto;
            background-color: #f5f5f5;
        }
        .container {
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 400px;
            text-align: center;
            background-color: white;
            animation: fadeIn 1s ease-in-out;
            margin: 20px 0;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        h1 {
            font-size: 24px;
            animation: slideDown 1.5s ease-in-out;
        }
        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        label {
            display: block;
            margin-top: 10px;
            text-align: left;
        }
        input, select, button {
            width: calc(100% - 20px);
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }
        input, select {
            background-color: #EDEDED;
        }
        button {
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
            color: white;
        }
        button:hover {
            transform: scale(1.05);
        }
        #result, .weather-info {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            text-align: left;
        }
        .credits {
            margin-top: 20px;
            font-size: 8px;
        }
        .credits a {
            text-decoration: none;
        }
        .credits a:hover {
            text-decoration: underline;
        }
        .explanation, .methodology {
            margin-top: 20px;
            font-size: 9px;
            text-align: left;
            color: #333;
        }
        #chartContainer {
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
        }
    </style>
</head>
<body onload="applyTheme()">
    <div class="container">
        <h1>üèÉ‚Äç‚ôÇÔ∏è Heat Adjusted Pace ü•µ</h1>
        <form id="pace-form">
            <label for="goalPace">Goal Pace in Ideal Conditions (min/mile):</label>
            <input type="text" id="goalPace" name="goalPace" value="08:30" required><br>
            <label for="expectedTime">Time of Day (HH:MM):</label>
            <input type="text" id="expectedTime" name="expectedTime" value="07:00" required><br>
            <label for="date">Date (YYYY-MM-DD):</label>
            <input type="date" id="date" name="date" required><br>
            <label for="location">Location (City, Country):</label>
            <input type="text" id="location" name="location" value="New York, United States" required><br>
            <label for="acclimatizationHours">Average Hours Running in Heat/Week (Last 2 Weeks):</label>
            <input type="number" id="acclimatizationHours" name="acclimatizationHours" value="0" step="0.1" required><br>
            <label for="hydrationStatus">Hydration Status:</label>
            <select id="hydrationStatus" name="hydrationStatus" required>
                <option value="well">Well Hydrated</option>
                <option value="moderate">Moderately Hydrated</option>
                <option value="poor">Poorly Hydrated</option>
            </select><br>
            <label for="workoutLength">Length of Workout (minutes):</label>
            <input type="number" id="workoutLength" name="workoutLength" value="60" required><br>
            <button type="button" id="calculateButton" onclick="calculateHourlyPaces()">Calculate Adjusted Pace</button>
        </form>
        <div id="result"></div>
        <div id="weather-info" class="weather-info"></div>
        <div id="chartContainer">
            <canvas id="adjustmentChart"></canvas>
        </div>
        <div class="explanation">
            <h2>Why Adjust Your Pace?</h2>
            <p>Adjust your pace so that your workout remains aerobically equivalent and safe, even in challenging weather conditions.</p>
            <p>Adjusting your running pace based on weather conditions such as temperature and humidity is crucial for maintaining optimal performance and preventing overheating. The combination of high temperature and humidity can significantly increase the physiological stress on your body, making the same pace much harder to maintain.</p>
            <p>This is just an estimate; conditions affect people differently.</p>
        </div>
        <div class="methodology">
            <h2>Methodology and Calculations</h2>
            <p>This tool adjusts your running pace based on several key factors to ensure you can maintain a safe and effective workout. Here's how the calculations are done:</p>
            <ul>
                <li><strong>Dew Point Calculation:</strong> The dew point is calculated using the temperature and humidity to determine the combined heat stress on your body.</li>
                <li><strong>Base Adjustment:</strong> The base adjustment factor is determined from the combined temperature and dew point, reflecting how much these conditions typically slow you down.</li>
                <li><strong>Acclimatization Score:</strong> Based on your average hours of running in the heat per week over the last 2 weeks, an acclimatization score is calculated. More hours indicate better adaptation and a lower adjustment factor.</li>
                <li><strong>Wind Adjustment:</strong> Wind speed is factored in to adjust your pace, accounting for additional cooling from the wind.</li>
                <li><strong>UV Index Adjustment:</strong> The UV index is used to account for the added stress of direct sunlight exposure.</li>
                <li><strong>Interaction Effects:</strong> Adjustments are made to account for interactions between factors, such as the enhanced cooling effect of wind in hotter conditions and the compounding effects of high temperature and humidity.</li>
                <li><strong>Hydration Adjustment:</strong> Hydration status is used to adjust pace, with poorer hydration leading to a higher adjustment factor.</li>
                <li><strong>Workout Length Adjustment:</strong> Longer workouts lead to higher adjustment factors due to the increased stress on the body over time.</li>
            </ul>
            <p>The overall adjustment is applied to your goal pace to give you an adjusted pace that maintains the same effort level under the current conditions.</p>
        </div>
        <div class="credits">
            <p>Created by <a href="https://www.strava.com/athletes/113202952" target="_blank">J‚òÄÔ∏è Traum</a></p>
            <p>Sources:</p>
            <ul>
                <li><a href="http://maximumperformancerunning.blogspot.com/2013/07/temperature-dew-point.html" target="_blank">Maximum Performance Running</a></li>
                <li><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC9237513/" target="_blank">Impact of environmental heat stress on physiology, performance, and recovery in endurance sports</a></li>
                <li><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC8677617/" target="_blank">Effect of heat acclimation on pacing strategy and performance in endurance runners</a></li>
                <li><a href="https://link.springer.com/content/pdf/10.1007/s42978-024-00283-y.pdf" target="_blank">The influence of environmental temperature on marathon running performance</a></li>
            </ul>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
